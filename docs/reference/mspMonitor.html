<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Real-Time Process Monitoring Function — mspMonitor • mvMonitoring</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Real-Time Process Monitoring Function — mspMonitor"><meta property="og:description" content="Monitor and flag (if necessary) incoming multivariate process
  observations."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mvMonitoring</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/MVSPC-Workflow.html">Multivariate Statistical Process Control with mvMonitoring</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/gabrielodom/mvMonitoring/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Real-Time Process Monitoring Function</h1>
    <small class="dont-index">Source: <a href="https://github.com/gabrielodom/mvMonitoring/blob/HEAD/R/mspMonitor.R" class="external-link"><code>R/mspMonitor.R</code></a></small>
    <div class="hidden name"><code>mspMonitor.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Monitor and flag (if necessary) incoming multivariate process
  observations.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mspMonitor</span><span class="op">(</span><span class="va">observations</span>, <span class="va">labelVector</span>, <span class="va">trainingSummary</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>observations</dt>
<dd><p>an n x p xts matrix. For real-time monitoring via a
script within a batch file, n = 1, so this must be a 1 x p matrix. If lags
were included at the training step, then these observations will also have
lagged features.</p></dd>


<dt>labelVector</dt>
<dd><p>an n x 1 integer vector of class memberships</p></dd>


<dt>trainingSummary</dt>
<dd><p>the TrainingSpecs list returned by the mspTrain()
function. This list contains---for each class---the SPE and T2 thresholds,
as well the projection matrix.</p></dd>


<dt>...</dt>
<dd><p>Lazy dots for additional internal arguments</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An n x (p + 5) xts matrix, where the last five columns are:</p>
<p></p>
<dl><dt>SPE -- </dt>
<dd><p>the SPE statistic value for each observation
      in "observations"</p></dd>

    <dt>SPE_Flag -- </dt>
<dd><p>a vector of SPE indicators recording 0 if the test
      statistic is less than or equal to the critical value passed through
      from the threshold object</p></dd>

    <dt>T2 -- </dt>
<dd><p>the T2 statistic value for each observation in
      "observations"</p></dd>

    <dt>T2_Flag -- </dt>
<dd><p>a vector of T2 fault indicators, defined like
      SPE_Flag</p></dd>

    <dt>Alarm -- </dt>
<dd><p>a column indicating if there have been five flags in a
      row for either the SPE or T2 monitoring statistics or both. Alarm
      states are as follows: 0 = no alarm, 1 = Hotelling's T2 alarm, 2 =
      Squared Prediction Error alarm, and 3 = both alarms.</p></dd>

  
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function is designed to be run at specific time intervals
  (e.g.every 10 seconds, 30 seconds, 1 minute, 5 minutes, 10 minutes) through
  a scheduled operating script which calls this function and mspWarning(). We
  expect this script to be set up in Windows "Task Scheduler" or Macintosh OX
  "launchd" application suites. This function takes in the specific
  observations to monitor and their class memberships (if any) and returns an
  xts matrix of these observation columns concatenated with their monitoring
  statistic values, flag statuses, and an empty alarm column. Users should
  then append these rows onto a previously existing matrix of daily
  observations. The mspWarning() function will then take in the daily
  observation xts matrix with updated rows returned by this function and
  check the monitoring statistic flag indicators to see if an alarm status
  has been reached. For further details, see the mspWarning() function.</p>
<p>This function calls the faultDetect() function, and requires the training
information returned by the mspTrain function. This function will return
the xts matrix necessary for the mspWarning() function.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Calls: <code><a href="faultDetect.html">faultDetect</a></code>. Pipe flow: <code><a href="mspTrain.html">mspTrain</a></code>
  into <code>mspMonitor</code> into <code><a href="mspWarning.html">mspWarning</a></code>.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co"># cut down on R CMD check time</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">nrml</span> <span class="op">&lt;-</span> <span class="fu"><a href="mspProcessData.html">mspProcessData</a></span><span class="op">(</span>faults <span class="op">=</span> <span class="st">"NOC"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">nrml</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'nrml' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Calculate the training summary, but save five observations for monitoring.</span></span></span>
<span class="r-in"><span>  <span class="va">trainResults_ls</span> <span class="op">&lt;-</span> <span class="fu"><a href="mspTrain.html">mspTrain</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nrml</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">n</span> <span class="op">-</span> <span class="fl">5</span><span class="op">)</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                              labelVector <span class="op">=</span> <span class="va">nrml</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">n</span> <span class="op">-</span> <span class="fl">5</span><span class="op">)</span>, <span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                              trainObs <span class="op">=</span> <span class="fl">4320</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'nrml' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># While training, we included 1 lag (the default), so we will also lag the</span></span></span>
<span class="r-in"><span>  <span class="co">#   observations we will test.</span></span></span>
<span class="r-in"><span>  <span class="va">testObs</span> <span class="op">&lt;-</span> <span class="va">nrml</span><span class="op">[</span><span class="op">(</span><span class="va">n</span> <span class="op">-</span> <span class="fl">6</span><span class="op">)</span><span class="op">:</span><span class="va">n</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'nrml' not found</span>
<span class="r-in"><span>  <span class="va">testObs</span> <span class="op">&lt;-</span> <span class="fu">xts</span><span class="fu">:::</span><span class="fu"><a href="https://rdrr.io/pkg/xts/man/diff.html" class="external-link">lag.xts</a></span><span class="op">(</span><span class="va">testObs</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'testObs' not found</span>
<span class="r-in"><span>  <span class="va">testObs</span> <span class="op">&lt;-</span> <span class="va">testObs</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>,<span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'testObs' not found</span>
<span class="r-in"><span>  <span class="va">testObs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">nrml</span><span class="op">[</span><span class="op">(</span><span class="va">n</span> <span class="op">-</span> <span class="fl">5</span><span class="op">)</span><span class="op">:</span><span class="va">n</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">testObs</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'nrml' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">mspMonitor</span><span class="op">(</span>observations <span class="op">=</span> <span class="va">testObs</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>             labelVector <span class="op">=</span> <span class="va">testObs</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>             trainingSummary <span class="op">=</span> <span class="va">trainResults_ls</span><span class="op">$</span><span class="va">TrainingSpecs</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'testObs' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://melissanjohnson.github.io" class="external-link">Melissa Innerst</a>, <a href="https://github.com/gabrielodom" class="external-link">Gabriel Odom</a>, <a href="https://benbarnard.bearstatistics.com" class="external-link">Ben Barnard</a>, Karen Kazor, <a href="https://sites.baylor.edu/mandy_hering" class="external-link">Amanda Hering</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

